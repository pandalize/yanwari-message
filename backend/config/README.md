# 🎭 AIトーン変換設定ガイド

このディレクトリには、やんわり伝言のAIトーン変換機能の設定ファイルが含まれています。

## 📝 設定ファイル

### `tone_prompts.yaml`
AIトーン変換のプロンプトとパラメータを設定するファイルです。
**開発者でなくても安全に編集できます。**

## 🔧 チューニング方法

### 1. 基本的な調整

**トーンの特徴を変更:**
```yaml
tones:
  gentle:
    characteristics:
      - "丁寧語・敬語を使用"
      - "相手の立場や感情を理解していることを示す"
      - "感謝の気持ちを強く表現"  # ← 追加・変更可能
```

**絵文字の調整:**
```yaml
      - "絵文字を適度に使用（😊🙏💦😅など）"  # ← 使用する絵文字を指定
```

**敬語レベルの調整:**
```yaml
      - "プロフェッショナルな敬語"  # formal
      - "丁寧語・敬語を使用"      # standard  
      - "親しみやすい敬語"        # casual
```

### 2. 新しいトーンの追加

```yaml
tones:
  # 既存のトーン...
  
  business_formal:  # ← 新しいトーン名
    display_name: "👔 ビジネス正式"
    description: "正式なビジネス文書トーン"
    characteristics:
      - "正式な敬語を使用"
      - "ビジネス文書として適切"
      - "簡潔で要点を明確に"
    instruction_template: |
      以下のメッセージを、正式なビジネス文書のトーンに変換してください。
      
      特徴:
      {{range .Characteristics}}- {{.}}
      {{end}}
      元のメッセージ: {{.OriginalText}}
      
      ビジネス正式トーンに変換:
```

### 3. AIモデルの調整

```yaml
ai_model:
  name: "claude-3-5-sonnet-20241022"  # モデル名
  max_tokens: 1000                    # 最大トークン数（短く/長くしたい場合）
```

## ⚡ 設定の反映方法

### 開発環境（推奨）
1. `tone_prompts.yaml` を編集
2. 以下のAPIを呼び出して設定を再読み込み:
```bash
curl -X POST http://localhost:8080/api/v1/transform/reload-config \
  -H "Authorization: Bearer [JWTトークン]"
```

### 本番環境
1. `tone_prompts.yaml` を編集
2. サーバーを再起動

## 🎯 実践的な調整例

### より優しい表現にしたい場合
```yaml
gentle:
  characteristics:
    - "極めて丁寧な敬語を使用"
    - "深い共感と理解を示す表現"
    - "謝罪と感謝を十分に表現"
    - "相手への最大限の配慮"
```

### カジュアルさを抑えたい場合
```yaml
casual:
  characteristics:
    - "親しみやすいが適度に丁寧"
    - "関西弁は控えめに"
    - "絵文字は最小限"
    - "堅すぎず、砕けすぎない表現"
```

### ビジネス向けに調整したい場合
```yaml
constructive:
  characteristics:
    - "ビジネス敬語を使用"
    - "具体的な解決策を提示"
    - "期限やスケジュールを明確に"
    - "次のアクションを具体的に示す"
```

## 🚨 注意事項

1. **テンプレート構文**: `{{.Characteristics}}` と `{{.OriginalText}}` は必須
2. **YAML構文**: インデントは半角スペースを使用
3. **バックアップ**: 編集前に元ファイルをバックアップ推奨
4. **テスト**: 設定変更後は必ずテスト実行

## 📊 効果測定

設定変更後は以下の方法で効果を確認：

1. **APIテスト**:
```bash
curl -X POST http://localhost:8080/api/v1/transform/tones \
  -H "Authorization: Bearer [TOKEN]" \
  -d '{"messageId":"[ID]","originalText":"テストメッセージ"}'
```

2. **UI確認**: ブラウザでトーン変換画面をテスト

3. **A/Bテスト**: 変更前後の結果を比較

## 💡 チューニングのコツ

- **段階的変更**: 一度に大きく変更せず、少しずつ調整
- **具体例**: 「丁寧に」より「恐縮ですがという表現を使用」など具体的に
- **バランス**: 複数の特徴を組み合わせてバランスを取る
- **ユーザーフィードバック**: 実際の使用感を重視